<div class="container-fluid mt-5">
  <div class="container" *ngIf="recipe">
    <div class="row">

      <div class="col-md-6 col-12">
        <img src="{{recipe.imageUrl}}" class="img-fluid rounded" alt="..." />
      </div>

      <div class="col-md-6 col-12">
        <div class="card-body text-start">
          <h1 class="card-title mt-4">{{ recipe.title }}</h1>
          <h4 class="mt-3">Categoria: <span>{{ recipe.category }}</span></h4>

          <div class="row text-center mt-5">

            <div class="col-12 col-md-4 border rounded border-2 rectangles">
              <i class="bi bi-clock"></i>
              <h5 class="px-2">Preparazione:</h5>
              <span class="card-text">{{ recipe.prepTime }}</span>
            </div>

            <div class="col-12 col-md-4 border rounded border-2 rectangles">
              <i class="bi bi-clock"></i>
              <h5>Cottura:</h5>
              <span class="card-text">{{ recipe.cookTime }}</span>
            </div>

            <div class="col-12 col-md-4 border rounded border-2 rectangles">
              <i class="bi bi-people-fill"></i>
              <h5>Portate:</h5>
              <span class="card-text">{{ recipe.servings }}</span>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="row my-5">

      <div class="col-12 col-md-6">
        <h2>
          Ingredients:
        </h2>
        <hr>
        <div class="" *ngFor="let ingredient of recipe.ingredients">
          <h4>{{ingredient.name}}: {{ingredient.quantity}}</h4>
          <hr>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <h2>
          Instructions:
        </h2>
        <div class="detail-text">
          <h3>{{ recipe.instructions }}</h3>
        </div>

      </div>
    </div>
    <div class="d-flex justify-content-center">
      <button class="btn btn-danger m-2" *ngIf="(showForms)" (click)="deleteRecipe(recipe.id!)">Cancella</button>
      <button class="btn btn-warning m-2" *ngIf="(showForms)" data-bs-toggle="modal"
        data-bs-target="#updateRecipeModal">Modifica</button>
      </div>
      <div class="d-flex justify-content-center">
      <a type="button" class="btn btn-primary" href="/recipes">Torna indietro</a>
    </div>

    <div class="modal fade" id="updateRecipeModal" tabindex="-1" aria-labelledby="updateRecipeModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog modal-lg">
                                  <div class="modal-content">
                                    <div class="modal-header">
                                      <h5 class="modal-title" id="updateRecipeModalLabel">Nuova Ricetta</h5>
                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                      <form (submit)="updateRecipe(recipe.id!)">
                                        <div class="form-group">
                                          <label for="Title">Titolo</label>
                                          <input type="text" class="form-control" id="title" [(ngModel)]="newRecipe.title" name="title" required>
                                        </div>

                                        <div class="form-group">
                                          <label for="category">Categoria</label>
                                          <select class="form-control" id="category" [(ngModel)]="newRecipe.category" name="category" required>
                                            <option value="ANTIPASTI">ANTIPASTI</option>
                                            <option value="PRIMI">PRIMI</option>
                                            <option value="SECONDI">SECONDI</option>
                                            <option value="CONTORNI">CONTORNI</option>
                                            <option value="DESSERTS">DESSERTS</option>
                                          </select>
                                        </div>

                                        <div class="form-group">
                                          <label for="Instructions">Istruzioni</label>
                                          <input type="text" class="form-control" id="instructions" [(ngModel)]="newRecipe.instructions"
                                            name="instructions" required>
                                        </div>

                                        <div class="form-group">
                                          <label for="PrepTime">Tempo di preparazione</label>
                                          <input type="text" class="form-control" id="prepTime" [(ngModel)]="newRecipe.prepTime" name="prepTime"
                                            required>
                                        </div>

                                        <div class="form-group">
                                          <label for="CookTime">Tempo di cottura</label>
                                          <input type="text" class="form-control" id="cookTime" [(ngModel)]="newRecipe.cookTime" name="cookTime"
                                            required>
                                        </div>

                                        <div class="form-group">
                                          <label for="Servings">Portate</label>
                                          <input type="text" class="form-control" id="servings" [(ngModel)]="newRecipe.servings" name="servings"
                                            required>
                                        </div>

                                        <div class="form-group">
                                          <label for="ImageUrl">Image url</label>
                                          <input type="text" class="form-control" id="imageUrl" [(ngModel)]="newRecipe.imageUrl" name="imageUrl"
                                            required>
                                        </div>

                                        <!-- Form per creare un nuovo ingrediente -->
                                        <form>
                                          <div class="form-group">
                                            <label for="Ingredients">Ingredienti</label>
                                            <input type="text" class="form-control" [(ngModel)]="newIngredient.name" name="name"
                                              placeholder="Nome ingrediente" (input)=" newIngredient.name = formatInput(newIngredient.name)">
                                            <input type="text" class="form-control" [(ngModel)]="newIngredient.quantity" name="quantity"
                                              placeholder="QuantitÃ  ingrediente">
                                            <input type="text" class="form-control" [(ngModel)]="newIngredient.imgUrl" name="imageUrl"
                                              placeholder="Url immagine ingrediente">
                                            <button (click)="addIngredientToList()" class="btn btn-primary mt-3">Aggiungi ingrediente</button>
                                          </div>

                                          <!-- Elenco degli ingredienti aggiunti -->
                                          <hr>
                                          <div>
                                            <h4>Ingredienti aggiunti:</h4>
                                            <ul>
                                              <li *ngFor="let ingredient of selectedIngredients"> {{ ingredient.name }} - {{
                                                ingredient.quantity
                                                }}
                                                <button class="btn btn-danger" (click)="removeIngredient(ingredient)">Rimuovi</button>
                                              </li>
                                            </ul>

                                          </div>
                                        </form>

                                        <div class="mt-3">
                                          <button type="submit" class="btn btn-primary">Salva</button>
                                          <button type="button" class="btn btn-secondary">Annulla</button>
                                        </div>
                                      </form>

                                      <hr>

                                    </div>
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-warning" data-bs-dismiss="modal">Chiudi</button>
                                    <button type="submit" class="btn btn-primary">Salva</button>
                                  </div>
                                </div>
        </div>
  </div>
</div>
